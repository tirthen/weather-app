{% extends "layout.njk" %}

{% block content %}
<div class="container mt-4">
    <!-- Welcome Section -->
    <div class="jumbotron jumbotron-fluid bg-primary text-white text-center mb-4">
        <div class="container">
            <h1 class="display-4"><i class="fas fa-cloud-sun"></i> Weather Lookup</h1>
            <p class="lead">Get current weather and hourly forecasts for any location worldwide</p>
        </div>
    </div>

    <!-- Main Search Section -->
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <!-- Search Form Card -->
            <div class="card shadow mb-3">
                <div class="card-header bg-light">
                    <h4 class="mb-0"><i class="fas fa-search"></i> Search Weather by Address</h4>
                </div>
                <div class="card-body">
                    <!-- FIXED: Removed 'required' attribute and added novalidate to prevent browser validation -->
                    <form id="addressForm" novalidate>
                        <div class="input-group input-group-lg mb-3">
                            <input type="text" 
                                   class="form-control" 
                                   id="addressInput" 
                                   placeholder="Enter an address (e.g., New York, NY or London, UK)"
                                   autocomplete="off"
                                   style="border-top-right-radius: 0; border-bottom-right-radius: 0;">
                            <div class="input-group-append">
                                <!-- FIXED: Perfect button alignment using input-group-lg -->
                                <button class="btn btn-primary" 
                                        type="submit" 
                                        id="searchSubmitBtn"
                                        disabled
                                        style="border-top-left-radius: 0; border-bottom-left-radius: 0;">
                                    <i class="fas fa-search"></i> Search
                                </button>
                            </div>
                        </div>
                        <small class="form-text text-muted">
                            <i class="fas fa-info-circle"></i> Enter a city, address, or location. Minimum 3 characters required.
                        </small>
                    </form>
                </div>
            </div>

            <!-- Results will appear RIGHT HERE under the search form -->
            <div id="searchResults"></div>

            <!-- Action Buttons -->
            <div class="text-center mb-4">
                <button id="getWeatherBtn" class="btn btn-secondary btn-lg mx-2 mb-2" disabled>
                    <i class="fas fa-cloud-sun"></i> Get Weather
                </button>
                <button id="saveSearchBtn" class="btn btn-secondary btn-lg mx-2 mb-2" disabled>
                    <i class="fas fa-save"></i> Save to History
                </button>
                <button id="showHistoryBtn" class="btn btn-info btn-lg mx-2 mb-2">
                    <i class="fas fa-history"></i> Show History
                </button>
            </div>
        </div>
    </div>

    <!-- How to Use Section -->
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card border-info">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0"><i class="fas fa-question-circle"></i> How to Use</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3 text-center mb-3">
                            <div class="h2 text-primary"><i class="fas fa-search-location"></i></div>
                            <h6>1. Search Address</h6>
                            <p class="small text-muted">Enter any address or location to find coordinates</p>
                        </div>
                        <div class="col-md-3 text-center mb-3">
                            <div class="h2 text-success"><i class="fas fa-cloud-download-alt"></i></div>
                            <h6>2. Get Weather</h6>
                            <p class="small text-muted">Fetch current weather and hourly forecast</p>
                        </div>
                        <div class="col-md-3 text-center mb-3">
                            <div class="h2 text-warning"><i class="fas fa-save"></i></div>
                            <h6>3. Save Search</h6>
                            <p class="small text-muted">Store your search in history for later reference</p>
                        </div>
                        <div class="col-md-3 text-center mb-3">
                            <div class="h2 text-info"><i class="fas fa-history"></i></div>
                            <h6>4. View History</h6>
                            <p class="small text-muted">Browse all your previous weather searches</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Footer Space -->
<div class="container mt-5 mb-5">
    <div class="text-center text-muted">
        <small>
            <i class="fas fa-globe"></i> Weather data powered by OpenWeatherMap API
        </small>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="/js/main.js"></script>
{% endblock %}